<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç«æ˜Ÿå•†åœˆ 2026 æ˜¥é…’æ´¾å° - å¿ƒç†æ¸¬é©—</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .animate-fade-in { animation: fadeIn 0.5s ease-out forwards; }
        .loading-spin {
            border: 4px solid rgba(251, 146, 60, 0.2);
            border-top: 4px solid #fb923c;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
        }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
    </style>
</head>
<body class="bg-slate-50 text-slate-800 font-sans min-h-screen flex flex-col items-center p-4 md:p-8">

    <div id="app" class="max-w-2xl w-full bg-white rounded-3xl shadow-xl overflow-hidden border border-slate-100">
        <!-- Progress Bar -->
        <div id="progress-container" class="w-full h-2 bg-slate-100 hidden">
            <div id="progress-bar" class="h-full bg-orange-400 transition-all duration-300" style="width: 0%"></div>
        </div>

        <div id="content-area" class="p-6 md:p-10">
            <!-- JavaScript æœƒåœ¨é€™è£¡æ³¨å…¥å…§å®¹ -->
        </div>
    </div>

    <!-- Footer Stats -->
    <div id="footer-highlights" class="mt-8 grid grid-cols-2 md:grid-cols-4 gap-4 max-w-2xl w-full px-2">
        <!-- Highlights will be injected here -->
    </div>

    <script>
        // å¦‚æœä½ æœ‰ Google Gemini API Keyï¼Œè«‹å¡«å…¥ä¸‹æ–¹å¼•è™Ÿä¸­
        // è‹¥ç•™ç©ºï¼Œå‰‡æœƒä½¿ç”¨é«˜å“è³ªé è¨­åœ–ç‰‡
        const apiKey = ""; 
        
        let state = {
            step: 'welcome',
            currentQuestion: 0,
            answers: [],
            isGenerating: false,
            generatedImage: null
        };

        const questions = [
            {
                text: "è¸é€²ã€Œç«æ˜Ÿä¸­å­¸ã€æ ¡é–€å£ï¼Œä½ è½åˆ°çš„ç¬¬ä¸€ç¨®è²éŸ³æ˜¯ï¼Ÿ",
                options: [
                    { text: "æ¸…è„†çš„æ—©è‡ªç¿’è®€æ›¸è²", trait: "academic" },
                    { text: "æ“å ´ä¸Šç†±è¡€çš„çƒé‹æ‘©æ“¦è²", trait: "sporty" },
                    { text: "èµ°å»Šä¸Šè¨è«–å…«å¦çš„æ‚„æ‚„è©±", trait: "social" },
                    { text: "éŸ³æ¨‚æ•™å®¤å‚³ä¾†çš„è¼•å¿«ç´è²", trait: "artistic" }
                ]
            },
            {
                text: "åœ¨æ•™å®¤è£¡ï¼Œä½ é€šå¸¸æœƒé¸æ“‡ååœ¨å“ªå€‹ä½ç½®ï¼Ÿ",
                options: [
                    { text: "è¬›å°æ­£å‰æ–¹ï¼ˆå­¸éœ¸å€ï¼‰", trait: "academic" },
                    { text: "çª—é‚Šæœ€å¾Œä¸€æ’ï¼ˆæ†‚é¬±ä¸»è§’å€ï¼‰", trait: "artistic" },
                    { text: "ä¸­é–“èµ°é“æ—ï¼ˆéš¨æ™‚æº–å‚™è¡ç¦åˆ©ç¤¾ï¼‰", trait: "sporty" },
                    { text: "è§’è½é å¾Œï¼ˆè§€å¯Ÿå¤§å®¶çš„åœ°ä¸‹æŒ‡æ®å®˜ï¼‰", trait: "social" }
                ]
            },
            {
                text: "ä¸‹èª²ååˆ†é˜ï¼Œä½ æœ€å¸¸å‡ºç¾åœ¨å“ªè£¡ï¼Ÿ",
                options: [
                    { text: "åœ–æ›¸é¤¨æˆ–åº§ä½ä¸Šå®‰éœå”¸æ›¸", trait: "academic" },
                    { text: "ç¦åˆ©ç¤¾æ¶è³¼å‰›å‡ºçˆçš„ç†±é£Ÿ", trait: "social" },
                    { text: "æ“å ´è·ŸåŒå­¸ PK ä¸‰åˆ†çƒ", trait: "sporty" },
                    { text: "å¤©å°æˆ–æ ¡åœ’è§’è½æˆ´è‘—è€³æ©Ÿè½éŸ³æ¨‚", trait: "artistic" }
                ]
            },
            {
                text: "å¦‚æœå­¸æ ¡è¦é¸å‡ºä¸€å€‹é¢¨é›²äººç‰©ï¼Œä½ è¦ºå¾—è‡ªå·±æœƒæ˜¯å› ç‚ºä»€éº¼å…¥é¸ï¼Ÿ",
                options: [
                    { text: "å…¨æ ¡ç¬¬ä¸€åçš„æˆç¸¾èˆ‡æ•´é½Šçš„å„€å®¹", trait: "academic" },
                    { text: "å¸¶é ˜çƒéšŠæ‹¿åˆ°è¯è³½å† è»", trait: "sporty" },
                    { text: "å¹½é»˜é¢¨è¶£ï¼Œå…¨æ ¡æ²’äººä¸èªè­˜ä½ ", trait: "social" },
                    { text: "æ ¡åˆŠç¤¾æˆ–ç†±éŸ³ç¤¾çš„éˆé­‚äººç‰©", trait: "artistic" }
                ]
            },
            {
                text: "æ”¶åˆ°åŒ¿åæƒ…æ›¸æ”¾åœ¨æ›¸æ¡Œè£¡ï¼Œä½ çš„åæ‡‰æ˜¯ï¼Ÿ",
                options: [
                    { text: "å†·éœåˆ†æç­†è·¡ï¼Œæ¨è«–æ˜¯èª°å¯«çš„", trait: "academic" },
                    { text: "å¤§æ–¹åœ°è·Ÿæ­»é»¨ç‚«è€€ä¸¦ä¸€èµ·è¨è«–", trait: "social" },
                    { text: "å®³ç¾åœ°æ”¶é€²æ›¸åŒ…ï¼Œå›å®¶å†å·å·çœ‹", trait: "artistic" },
                    { text: "å¿ƒæƒ³ï¼šé€™æœƒå½±éŸ¿æˆ‘ç·´çƒçš„é€Ÿåº¦å—ï¼Ÿ", trait: "sporty" }
                ]
            }
        ];

        const resultTypes = {
            academic: {
                title: "çŸ¥æ€§å­¸éœ¸èè‹±",
                description: "ä½ æ˜¯æ ¡åœ’ä¸­äººäººç¨±ç¾¨çš„æ¨¡ç¯„ç”Ÿï¼Œé‚è¼¯æ¸…æ™°ã€å„€å®¹å„ªé›…ã€‚æœ€é©åˆä½ çš„è£æ‰®æ˜¯å¸¶æœ‰ç²¾ç·»æ„Ÿçš„åˆ¶æœèˆ‡çœ¼é¡ï¼Œå±•ç¾å°ˆæ¥­èˆ‡æ¸…æ–°çš„æ°£è³ªã€‚",
                outfit: "åˆèº«è¥¿è£å¤–å¥—æˆ–é‡ç¹”èƒŒå¿ƒã€ç™½è¥¯è¡«ã€é»‘æ¡†çœ¼é¡ã€çš®é©æ›¸åŒ…ã€ä¹¾æ·¨çš„ç‰›æ´¥é‹ã€‚",
                defaultImage: "https://images.unsplash.com/photo-1523050854058-8df90110c9f1?q=80&w=800",
                prompt: "A high school student in academic uniform, glasses, library background, high quality anime illustration."
            },
            sporty: {
                title: "ç†±è¡€ç‹ç‰ŒéšŠé•·",
                description: "ä½ æ˜¯å……æ»¿æ´»åŠ›èˆ‡è¡Œå‹•åŠ›çš„ä»£åè©ï¼é‹å‹•å ´æ‰æ˜¯ä½ çš„ä¸»å ´ã€‚ç©¿ä¸Šå……æ»¿é‹å‹•å…ƒç´ çš„å–®å“ï¼Œä½ å°±æ˜¯å…¨å ´ç„¦é»ã€‚",
                outfit: "æ ¡éšŠæ£’çƒå¤–å¥—ï¼ˆVarsity Jacketï¼‰ã€å…§æ­çƒè¡£æˆ–é€£å¸½è¡›è¡£ã€è­·è…•ã€é™é‡é‹å‹•é‹ã€é‹å‹•é ­å¸¶ã€‚",
                defaultImage: "https://images.unsplash.com/photo-1544644181-1484b3fdfc62?q=80&w=800",
                prompt: "A cool student wearing a varsity jacket, sporty look, basketball court background, high quality illustration."
            },
            social: {
                title: "å…¨èƒ½æ ¡åœ’é¢¨é›²äººç‰©",
                description: "å¹½é»˜ã€éš¨å’Œä¸”ç¤¾äº¤åœˆå»£é—Šçš„ä½ ï¼Œæ˜¯ç­ä¸Šçš„é–‹å¿ƒæœã€‚ä½ çš„ç©¿æ­é¢¨æ ¼éš¨æ€§è€Œä¸å¤±æ™‚å°šæ„Ÿï¼Œæœ€é©åˆæ··æ­é¢¨æ ¼ã€‚",
                outfit: "å¯¬é¬†çš„åˆ¶æœè¥¯è¡«ï¼ˆä¸ç´®é€²å»ï¼‰ã€ä¼‘é–’çŸ­è¤²æˆ–ç™¾è¤¶è£™ã€äº®çœ¼çš„å¸†å¸ƒé‹ã€èº«ä¸Šæ›è‘—è£é£¾æ€§åŠé£¾ã€‚",
                defaultImage: "https://images.unsplash.com/photo-1529333166437-7750a6dd5a70?q=80&w=800",
                prompt: "A trendy student in casual school uniform, cheerful, social campus setting, high quality illustration."
            },
            artistic: {
                title: "æ–‡è—æ†‚é¬±ç³»ä¸»è§’",
                description: "ä½ å…§å¿ƒç´°è†©ã€å……æ»¿å‰µæ„ï¼Œåƒæ˜¯å¾æ—¥åŠ‡æˆ–å°èªªä¸­èµ°å‡ºä¾†çš„è§’è‰²ã€‚æ·¡æ·¡çš„æ–‡é’æ„Ÿèˆ‡å¾©å¤é¢¨æœ€èƒ½è¥¯æ‰˜ä½ çš„æ°£è³ªã€‚",
                outfit: "æ£‰éº»æè³ªè¥¯è¡«ã€é•·ç‰ˆåˆ¶æœå¤–å¥—ã€è€³ç½©å¼è€³æ©Ÿã€åº•ç‰‡ç›¸æ©Ÿæ›åœ¨é ¸éƒ¨ã€å¸†å¸ƒæ›¸åŒ…ã€‚",
                defaultImage: "https://images.unsplash.com/photo-1516280440614-37939bbacd81?q=80&w=800",
                prompt: "An artistic student with headphones and camera, dreamy cherry blossom background, high quality illustration."
            }
        };

        const icons = {
            cap: `<svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-orange-500"><path d="M22 10v6M2 10l10-5 10 5-10 5z"/><path d="M6 12v5c3 3 9 3 12 0v-5"/></svg>`,
            right: `<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m9 18 6-6-6-6"/></svg>`,
            refresh: `<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"/><path d="M3 3v5h5"/><path d="M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16"/><path d="M16 16h5v5"/></svg>`,
            calendar: `<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect width="18" height="18" x="3" y="4" rx="2" ry="2"/><line x1="16" x2="16" y1="2" y2="6"/><line x1="8" x2="8" y1="2" y2="6"/><line x1="3" x2="21" y1="10" y2="10"/></svg>`,
            star: `<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-orange-500"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/></svg>`
        };

        function render() {
            const container = document.getElementById('content-area');
            const progress = document.getElementById('progress-container');
            const progressBar = document.getElementById('progress-bar');
            const footer = document.getElementById('footer-highlights');

            if (state.step === 'welcome') {
                progress.classList.add('hidden');
                footer.classList.remove('hidden');
                container.innerHTML = `
                    <div class="text-center animate-fade-in">
                        <div class="inline-block p-4 bg-orange-100 rounded-full mb-4">${icons.cap}</div>
                        <h1 class="text-3xl font-bold text-slate-900 mb-2">ç«æ˜Ÿå•†åœˆ 2026 æ˜¥é…’</h1>
                        <h2 class="text-xl text-orange-600 font-medium mb-6">å•†åœˆè¿”æ ¡æ—¥ãƒ»å¿ƒç†æ¸¬é©—</h2>
                        <div class="bg-orange-50 rounded-2xl p-6 text-left mb-8 border border-orange-100">
                            <p class="text-slate-600 leading-relaxed">
                                å®éˆ´éˆ´ï¼ä¸Šèª²é˜éŸ¿äº†ã€‚ä»Šæ™šï¼Œæˆ‘å€‘å°‡é‡è¿”æ ¡åœ’ï¼Œæ‰¾å›é‚£ä»½ç†±è¡€ã€‚
                                åœ¨å‡ºç™¼åƒåŠ æ˜¥é…’æ´¾å°å‰ï¼Œå…ˆä¾†æ¸¬æ¸¬ä½ å…§å¿ƒæ·±è™•æ˜¯å“ªä¸€ç¨®é¡å‹çš„ã€Œå­¸ç”Ÿã€ï¼Œä¸¦é ˜å–ä½ çš„ Dress Code å»ºè­°å§ï¼
                            </p>
                        </div>
                        <button onclick="startQuiz()" class="w-full py-4 bg-orange-500 hover:bg-orange-600 text-white rounded-xl font-bold text-lg shadow-lg flex items-center justify-center gap-2 transition-all">
                            é–‹å§‹è¿”æ ¡æ¸¬é©— ${icons.right}
                        </button>
                    </div>
                `;
                
                footer.innerHTML = `
                    <div class="bg-white/50 backdrop-blur p-3 rounded-xl border border-white flex flex-col items-center text-center gap-1 shadow-sm">
                        <span class="text-orange-500">ğŸ†</span><span class="text-xs font-bold text-slate-600">è±ªè¯æ˜¥é…’é¤å®´</span>
                    </div>
                    <div class="bg-white/50 backdrop-blur p-3 rounded-xl border border-white flex flex-col items-center text-center gap-1 shadow-sm">
                        <span class="text-orange-500">ğŸ’°</span><span class="text-xs font-bold text-slate-600">ç¾é‡‘ä¸€æŠŠæŠ“</span>
                    </div>
                    <div class="bg-white/50 backdrop-blur p-3 rounded-xl border border-white flex flex-col items-center text-center gap-1 shadow-sm">
                        <span class="text-orange-500">ğŸµ</span><span class="text-xs font-bold text-slate-600">çºŒæ”¤ç‹‚æ­¡å»</span>
                    </div>
                    <div class="bg-white/50 backdrop-blur p-3 rounded-xl border border-white flex flex-col items-center text-center gap-1 shadow-sm">
                        <span class="text-orange-500">ğŸ“</span><span class="text-xs font-bold text-slate-600">è¿”æ ¡ Dress Code</span>
                    </div>
                `;
            } else if (state.step === 'quiz') {
                progress.classList.remove('hidden');
                footer.classList.add('hidden');
                const q = questions[state.currentQuestion];
                progressBar.style.width = `${((state.currentQuestion + 1) / questions.length) * 100}%`;
                
                container.innerHTML = `
                    <div class="animate-fade-in">
                        <span class="text-sm font-bold text-orange-500 uppercase tracking-wider">å•é¡Œ ${state.currentQuestion + 1} / 5</span>
                        <h3 class="text-2xl font-bold text-slate-900 mt-2 mb-8">${q.text}</h3>
                        <div class="space-y-4">
                            ${q.options.map((opt, i) => `
                                <button onclick="handleAnswer('${opt.trait}')" class="w-full text-left p-5 rounded-2xl border-2 border-slate-100 hover:border-orange-300 hover:bg-orange-50 transition-all group flex items-center justify-between">
                                    <span class="font-medium text-lg text-slate-700 group-hover:text-orange-700">${opt.text}</span>
                                    <div class="w-6 h-6 rounded-full border-2 border-slate-200 group-hover:border-orange-500 flex items-center justify-center">
                                        <div class="w-3 h-3 bg-orange-500 rounded-full scale-0 group-hover:scale-100 transition-transform"></div>
                                    </div>
                                </button>
                            `).join('')}
                        </div>
                    </div>
                `;
            } else if (state.step === 'result') {
                progress.classList.add('hidden');
                const result = calculateResult();
                
                container.innerHTML = `
                    <div class="animate-fade-in">
                        <div class="text-center mb-8">
                            <span class="bg-orange-100 text-orange-700 px-4 py-1 rounded-full text-sm font-bold">æ¸¬é©—çµæœ</span>
                            <h3 class="text-3xl font-bold text-slate-900 mt-3">${result.title}</h3>
                        </div>

                        <div class="relative w-full aspect-[4/5] bg-slate-100 rounded-3xl overflow-hidden mb-8 border border-slate-200 shadow-inner flex items-center justify-center">
                            <div id="image-container" class="w-full h-full flex flex-col items-center justify-center bg-slate-50">
                                <div class="loading-spin mb-4"></div>
                                <p class="text-slate-500 font-medium">æ­£åœ¨è¼‰å…¥ç©¿æ­å»ºè­°åœ–...</p>
                            </div>
                            <div class="absolute bottom-4 left-4 right-4 bg-white/90 backdrop-blur p-4 rounded-2xl shadow-lg border border-white/50 z-10">
                                <p class="text-sm font-bold text-slate-900 flex items-center gap-2">
                                    ${icons.star} æ¨è–¦ç©¿æ­å…ƒç´ 
                                </p>
                                <p class="text-sm text-slate-600 mt-1">${result.outfit}</p>
                            </div>
                        </div>

                        <div class="space-y-6">
                            <div class="bg-slate-50 p-6 rounded-2xl border border-slate-100">
                                <p class="text-slate-700 leading-relaxed text-center">${result.description}</p>
                            </div>
                            <div class="bg-orange-50 border-2 border-dashed border-orange-200 p-6 rounded-2xl">
                                <h4 class="font-bold text-orange-900 mb-4 flex items-center gap-2">${icons.calendar} 2026 ç«æ˜Ÿæ˜¥é…’æ´»å‹•è©³æƒ…</h4>
                                <ul class="space-y-3 text-slate-700 text-sm">
                                    <li>ğŸ“… 2026 / 3 / 14ï¼ˆå…­ï¼‰18:00 é–‹å§‹</li>
                                    <li>ğŸ“ æ½®æ¸¯åŸåœ‹éš›ç¾é£Ÿé¤¨</li>
                                    <li>ğŸ’° é¤è²»ï¼š$1,200/äºº (6-12æ­² $500)</li>
                                </ul>
                                <div class="mt-6 flex flex-col gap-3">
                                    <a href="https://forms.gle/6bon5Vi8sEkkQUi48" target="_blank" class="block text-center w-full py-4 bg-orange-500 hover:bg-orange-600 text-white rounded-xl font-bold text-lg shadow-lg transition-all">ç«‹å³å ±å (æˆªæ­¢æ—¥ 02/08)</a>
                                    <button onclick="reset()" class="flex items-center justify-center gap-2 text-slate-400 hover:text-orange-500 transition-colors py-2 text-sm">${icons.refresh} é‡æ–°æ¸¬é©—</button>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
                
                // é–‹å§‹ç²å–åœ–ç‰‡
                fetchResultImage(result);
            }
        }

        function startQuiz() {
            state.step = 'quiz';
            render();
        }

        function handleAnswer(trait) {
            state.answers.push(trait);
            if (state.currentQuestion < questions.length - 1) {
                state.currentQuestion++;
            } else {
                state.step = 'result';
            }
            render();
        }

        function calculateResult() {
            const counts = state.answers.reduce((acc, t) => { acc[t] = (acc[t] || 0) + 1; return acc; }, {});
            const topTrait = Object.keys(counts).reduce((a, b) => counts[a] > counts[b] ? a : b);
            return resultTypes[topTrait];
        }

        function fetchResultImage(result) {
            // å¦‚æœæœ‰ API Key å‰‡å˜—è©¦ AI ç”Ÿæˆ
            if (apiKey && apiKey.length > 10) {
                generateAIImage(result.prompt, result.defaultImage);
            } else {
                // å¦å‰‡ç›´æ¥é¡¯ç¤ºé«˜å“è³ªé è¨­åœ–ç‰‡
                setTimeout(() => displayImage(result.defaultImage), 800);
            }
        }

        async function generateAIImage(prompt, fallback) {
            try {
                const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-image-preview:generateContent?key=${apiKey}`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        contents: [{ parts: [{ text: prompt }] }],
                        generationConfig: { responseModalities: ['TEXT', 'IMAGE'] }
                    })
                });
                if (!response.ok) throw new Error();
                const data = await response.json();
                const base64 = data.candidates?.[0]?.content?.parts?.find(p => p.inlineData)?.inlineData?.data;
                if (base64) {
                    displayImage(`data:image/png;base64,${base64}`);
                } else {
                    displayImage(fallback);
                }
            } catch (e) {
                displayImage(fallback);
            }
        }

        function displayImage(src) {
            const imgContainer = document.getElementById('image-container');
            if (imgContainer) {
                imgContainer.innerHTML = `<img src="${src}" class="w-full h-full object-cover animate-fade-in" alt="ç©¿æ­å»ºè­°">`;
            }
        }

        function reset() {
            state = { step: 'welcome', currentQuestion: 0, answers: [], isGenerating: false, generatedImage: null };
            render();
        }

        // åˆå§‹åŒ–é é¢
        render();
    </script>
</body>
</html>
